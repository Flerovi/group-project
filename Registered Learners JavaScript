document.addEventListener('DOMContentLoaded', function () {
    const learnerTable = document.getElementById('learnerData');

    // Load learners data from localStorage
    function loadLearners() {
        let learners = JSON.parse(localStorage.getItem('learners')) || [];
        learnerTable.innerHTML = ''; // Clear the table before loading

        learners.forEach((learner, index) => {
            let row = learnerTable.insertRow();

            row.insertCell(0).innerText = learner.learnerId;
            row.insertCell(1).innerText = learner.name;
            row.insertCell(2).innerText = learner.entryDate;

            let actionCell = row.insertCell(16);
            actionCell.innerHTML = `
                <button onclick="editLearner(${index})" class="text-blue-500">Edit</button>
                <button onclick="deleteLearner(${index})" class="text-red-500 ml-2">Delete</button>
            `;
        });
    }

    // Delete a learner
    window.deleteLearner = function(index) {
        let learners = JSON.parse(localStorage.getItem('learners')) || [];
        learners.splice(index, 1); // Remove the learner at the index
        localStorage.setItem('learners', JSON.stringify(learners));
        loadLearners(); // Reload the learners table
    };

    // Edit a learner
    window.editLearner = function(index) {
        let learners = JSON.parse(localStorage.getItem('learners')) || [];
        let learner = learners[index];
        
        // Prompt to edit values (In a real app, this would be a form instead of prompts)
        learner.learnerId = prompt("Update Learner ID", learner.learnerId);
        learner.entryDate = prompt("Update Entry Date", learner.entryDate);
        learner.name = prompt("Update Name", learner.name);

        learners[index] = learner;
        localStorage.setItem('learners', JSON.stringify(learners));
        loadLearners(); // Reload the learners table
    };

    // Initially load the learners data
    loadLearners();
});
